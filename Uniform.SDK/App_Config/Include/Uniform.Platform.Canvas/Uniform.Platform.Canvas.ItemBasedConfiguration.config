<!-- 
    UNIFORM
    This file is a part of Uniform distribution package

    IMPORTANT! Do not modify this file because all changes will be lost during further upgrade:
    Use patch files instead: https://doc.sitecore.com/developers/90/platform-administration-and-architecture/en/use-a-patch-file-to-customize-the-sitecore-configuration.html
-->

<configuration
  xmlns:set="http://www.sitecore.net/xmlconfig/set/"
  xmlns:role="http://www.sitecore.net/xmlconfig/role/"
  xmlns:patch="http://www.sitecore.net/xmlconfig/">

  <sitecore role:require="ContentManagement or ContentDelivery or Standalone">
    
    <commands>
      <command name="uniform:configuration:attachcanvasintegrationservice" type="Uniform.Commands.NewCanvasIntegrationService, Uniform.Platform.Canvas" />
      <command name="uniform:configuration:attachcanvasprefetchservice" type="Uniform.Commands.NewCanvasPrefetchService, Uniform.Platform.Canvas" />
      <command name="uniform:configuration:attachcanvasdeploymentscopeservice" type="Uniform.Commands.NewCanvasDeploymentScopeService, Uniform.Platform.Canvas" />
    </commands>
    
    <uniform>
      
      <services>    
        
        <itemBasedSiteConfigurationService>          
          <attachableServices hint="raw:AddAttachableService">
            
            <!-- Canvas Composition Service is attachable via item-based configuration-->
            <canvasIntegrationService folder="Canvas">
              <canvasIntegrationService commandTemplateID="{9BEC1E5E-5B66-484C-9EA2-FF424955842F}" assignChildrenTo="TemplateToCompositionMappings">
                <ApiHost>{49F1667D-59B5-4E08-9F1A-E5326FB39154}</ApiHost>
                <ApiKey>{0A4CDEF8-7575-41DB-9753-DBB4DA5F1581}</ApiKey>
                <ProjectId>{9B845FCD-56C4-4709-9E74-664FE98CA0C6}</ProjectId>  
                <PageComponentId>{0F18BA29-2A91-4581-B9A3-DE27FAB7248C}</PageComponentId>
              </canvasIntegrationService>
            </canvasIntegrationService>

            <!-- Prefetch Service is attachable via item-based configuration-->
            <prefetchService folder="ContentSync">
              <canvasPrefetchService commandTemplateID="{3EFE447F-158D-4F3D-BACC-94F6603A2D20}">
                <ApiKey>{DC554BAC-B167-4B90-B1D7-254CDC785EE1}</ApiKey>
              </canvasPrefetchService>
            </prefetchService>

            <!-- Deployment Scope Service is attachable via item-based configuration-->
            <deploymentScopeService folder="Deployment">
              <canvasDeploymentScopeService  commandTemplateID="{F7D7B61B-9533-4C0F-AD0D-0DE38C994288}">
                <ContentSyncRoots hint="list:AddContentSyncRoot">{277F9BE0-0E05-453E-9D3E-BA0FE673D377}</ContentSyncRoots>
              </canvasDeploymentScopeService>
            </deploymentScopeService>
          
          </attachableServices>          
        </itemBasedSiteConfigurationService>
          
      </services>
      
    </uniform>
    
  </sitecore>
</configuration>
